define(["./forOwn","../lang/isPlainObject"],function(forOwn,isPlainObject){function flattenTo(obj,result,prefix,level){forOwn(obj,function(value,key){var nestedPrefix=prefix?prefix+"."+key:key;if(level!==0&&isPlainObject(value)){flattenTo(value,result,nestedPrefix,level-1)}else{result[nestedPrefix]=value}});return result}function flatten(obj,level){if(obj==null){return{}}level=level==null?-1:level;return flattenTo(obj,{},"",level)}return flatten});