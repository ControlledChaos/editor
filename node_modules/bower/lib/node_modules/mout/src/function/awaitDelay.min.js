define(["../time/now","./timeout","../array/append"],function(now,timeout,append){function awaitDelay(callback,delay){var baseTime=now()+delay;return function(){var ms=Math.max(baseTime-now(),4);return timeout.apply(this,append([callback,ms,this],arguments))}}return awaitDelay});