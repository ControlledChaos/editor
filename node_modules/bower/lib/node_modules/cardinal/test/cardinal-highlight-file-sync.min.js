"use strict";var test=require("tap").test,util=require("util"),fs=require("fs"),path=require("path"),customTheme=require("./fixtures/custom"),cardinal=require("..");function inspect(obj){return console.log(util.inspect(obj,false,5,false))}var file=path.join(__dirname,"fixtures/foo.js"),fileWithErrors=path.join(__dirname,"fixtures/foo-with-errors.js");test("supplying custom theme",function(t){var highlighted=cardinal.highlightFileSync(file,{theme:customTheme});t.equals(highlighted,"[94mfunction[39m [96mfoo[39m[90m([39m[90m)[39m [33m{[39m \n  [32mvar[39m [96ma[39m [93m=[39m [34m3[39m[90m;[39m [31mreturn[39m [96ma[39m [93m>[39m [34m2[39m [93m?[39m [31mtrue[39m [93m:[39m [91mfalse[39m[90m;[39m \n[33m}[39m\n");t.end()});test("not supplying custom theme",function(t){var highlighted=cardinal.highlightFileSync(file);t.equals(highlighted,"[94mfunction[39m [37mfoo[39m[90m([39m[90m)[39m [33m{[39m \n  [32mvar[39m [37ma[39m [93m=[39m [34m3[39m[90m;[39m [31mreturn[39m [37ma[39m [93m>[39m [34m2[39m [93m?[39m [91mtrue[39m [93m:[39m [91mfalse[39m[90m;[39m \n[33m}[39m\n");t.end()});test("errornous code",function(t){try{cardinal.highlightFileSync(fileWithErrors)}catch(e){t.similar(e.message,/Unable to perform highlight. The code contained syntax errors.* Line 1: Unexpected token [(]/);t.end()}});test("non existing file",function(t){try{cardinal.highlightFileSync("./not/existing")}catch(e){t.similar(e.message,/ENOENT, .*not.existing/);t.end()}});