"use strict";var test=require("tap").test,util=require("util"),path=require("path"),cardinal=require("..");function inspect(obj){return console.log(util.inspect(obj,false,5,false))}var file=path.join(__dirname,"fixtures/json.json");test("json option set from extension",function(t){cardinal.highlightFile(file,function(err,highlighted){t.equals(null,err,"no error");t.equals(highlighted,'[33m{[39m[32m"foo"[39m[93m:[39m[92m"bar"[39m[32m,[39m[32m"baz"[39m[93m:[39m[92m"quux"[39m[32m,[39m[32m"bam"[39m[93m:[39m[90mnull[39m[33m}[39m');t.end()})});test("json option respected if false",function(t){cardinal.highlightFile(file,{json:false},function(err,highlighted){t.similar(err.message,/Unable to perform highlight. The code contained syntax errors.* Line 1: Unexpected token /);t.end()})});