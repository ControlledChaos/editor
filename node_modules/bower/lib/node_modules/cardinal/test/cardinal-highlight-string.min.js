"use strict";var test=require("tap").test,util=require("util"),fs=require("fs"),customTheme=require("./fixtures/custom"),cardinal=require("..");function inspect(obj){return console.log(util.inspect(obj,false,5,false))}var code="function foo() { var a = 3; return a > 2 ? true : false; }",codeWithErrors="function () { var a = 3; return a > 2 ? true : false; }";test("supplying custom theme",function(t){var highlighted=cardinal.highlight(code,{theme:customTheme});t.equals(highlighted,"[94mfunction[39m [96mfoo[39m[90m([39m[90m)[39m [33m{[39m [32mvar[39m [96ma[39m [93m=[39m [34m3[39m[90m;[39m [31mreturn[39m [96ma[39m [93m>[39m [34m2[39m [93m?[39m [31mtrue[39m [93m:[39m [91mfalse[39m[90m;[39m [33m}[39m");t.end()});test("not supplying custom theme",function(t){var highlighted=cardinal.highlight(code);t.equals(highlighted,"[94mfunction[39m [37mfoo[39m[90m([39m[90m)[39m [33m{[39m [32mvar[39m [37ma[39m [93m=[39m [34m3[39m[90m;[39m [31mreturn[39m [37ma[39m [93m>[39m [34m2[39m [93m?[39m [91mtrue[39m [93m:[39m [91mfalse[39m[90m;[39m [33m}[39m");t.end()});test("errornous code",function(t){try{cardinal.highlight(codeWithErrors)}catch(e){t.similar(e.message,/Unable to perform highlight. The code contained syntax errors.* Line 1: Unexpected token [(]/);t.end()}});test("line numbers no firstline given",function(t){var highlighted=cardinal.highlight(code,{linenos:true});t.equals(highlighted,"[90m1: [94mfunction[39m [37mfoo[39m[90m([39m[90m)[39m [33m{[39m [32mvar[39m [37ma[39m [93m=[39m [34m3[39m[90m;[39m [31mreturn[39m [37ma[39m [93m>[39m [34m2[39m [93m?[39m [91mtrue[39m [93m:[39m [91mfalse[39m[90m;[39m [33m}[39m");t.end()});test("line numbers firstline 99",function(t){var highlighted=cardinal.highlight(code,{linenos:true,firstline:99});t.equals(highlighted,"[90m99: [94mfunction[39m [37mfoo[39m[90m([39m[90m)[39m [33m{[39m [32mvar[39m [37ma[39m [93m=[39m [34m3[39m[90m;[39m [31mreturn[39m [37ma[39m [93m>[39m [34m2[39m [93m?[39m [91mtrue[39m [93m:[39m [91mfalse[39m[90m;[39m [33m}[39m");t.end()});test("line numbers multi line no first line given",function(t){var multilineCode=""+function foo(){return 1};var highlighted=cardinal.highlight(multilineCode,{linenos:true});t.equals(highlighted,"[90m1: [94mfunction[39m [37mfoo[39m[90m([39m[90m)[39m [33m{[39m\n[90m2:       [31mreturn[39m [34m1[39m[90m;[39m\n[90m3:     [33m}[39m");t.end()});test("line numbers multi line first line 99",function(t){var multilineCode=""+function foo(){return 1};var highlighted=cardinal.highlight(multilineCode,{linenos:true,firstline:99});t.equals(highlighted,"[90m 99: [94mfunction[39m [37mfoo[39m[90m([39m[90m)[39m [33m{[39m\n[90m100:       [31mreturn[39m [34m1[39m[90m;[39m\n[90m101:     [33m}[39m");t.end()});