"use strict";var assert=require("assert");var _=require("lodash");var chalk=require("chalk");var Separator=require("./separator");var Choice=require("./choice");var Choices=module.exports=function(choices,answers){this.choices=choices.map(function(val){if(val.type==="separator"){if(!(val instanceof Separator)){val=new Separator(val.line)}return val}return new Choice(val,answers)});this.realChoices=this.choices.filter(Separator.exclude).filter(function(item){return!item.disabled});Object.defineProperty(this,"length",{get:function(){return this.choices.length},set:function(val){this.choices.length=val}});Object.defineProperty(this,"realLength",{get:function(){return this.realChoices.length},set:function(){throw new Error("Cannot set `realLength` of a Choices collection")}})};Choices.prototype.getChoice=function(selector){assert(_.isNumber(selector));return this.realChoices[selector]};Choices.prototype.get=function(selector){assert(_.isNumber(selector));return this.choices[selector]};Choices.prototype.where=function(whereClause){return _.where(this.realChoices,whereClause)};Choices.prototype.pluck=function(propertyName){return _.pluck(this.realChoices,propertyName)};Choices.prototype.forEach=function(){return this.choices.forEach.apply(this.choices,arguments)};Choices.prototype.filter=function(){return this.choices.filter.apply(this.choices,arguments)};Choices.prototype.push=function(){var objs=_.map(arguments,function(val){return new Choice(val)});this.choices.push.apply(this.choices,objs);this.realChoices=this.choices.filter(Separator.exclude);return this.choices};