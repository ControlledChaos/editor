var util=require("util");var through=require("through");var Base=require("./baseUI");var rlUtils=require("../utils/readline");var _=require("lodash");module.exports=Prompt;function Prompt(opt){opt||(opt={});Base.apply(this,arguments);this.log=through(this.writeLog.bind(this));this.bottomBar=opt.bottomBar||"";this.render()}util.inherits(Prompt,Base);Prompt.prototype.render=function(){this.write(this.bottomBar);return this};Prompt.prototype.updateBottomBar=function(bottomBar){this.bottomBar=bottomBar;rlUtils.clearLine(this.rl);return this.render()};Prompt.prototype.writeLog=function(data){rlUtils.clearLine(this.rl);this.rl.output.write(this.enforceLF(data.toString()));return this.render()};Prompt.prototype.enforceLF=function(str){return str.match(/[\r\n]$/)?str:str+"\n"};Prompt.prototype.write=function(message){var msgLines=message.split(/\n/);this.height=msgLines.length;this.rl.setPrompt(_.last(msgLines));if(this.rl.output.rows===0&&this.rl.output.columns===0){rlUtils.left(this.rl,message.length+this.rl.line.length)}this.rl.output.write(message)};