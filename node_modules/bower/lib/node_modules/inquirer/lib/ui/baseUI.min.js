"use strict";var _=require("lodash");var readlineFacade=require("readline2");var UI=module.exports=function(opt){if(!this.rl){this.rl=readlineFacade.createInterface(opt)}this.rl.resume();this.onForceClose=this.onForceClose.bind(this);this.onKeypress=this.onKeypress.bind(this);this.rl.on("SIGINT",this.onForceClose);process.on("exit",this.onForceClose);this.rl.input.addListener("keypress",this.onKeypress)};UI.prototype.onForceClose=function(){this.close();console.log("\n")};UI.prototype.close=function(){this.rl.removeListener("SIGINT",this.onForceClose);this.rl.input.removeListener("keypress",this.onKeypress);process.removeListener("exit",this.onForceClose);this.rl.output.unmute();this.rl.output.write("[?25h");this.rl.output.end();this.rl.pause();this.rl.close();this.rl=null};UI.prototype.onKeypress=function(s,key){if(key&&(key.name==="enter"||key.name==="return")){return}if(this.rl){this.rl.emit("keypress",s,key)}};