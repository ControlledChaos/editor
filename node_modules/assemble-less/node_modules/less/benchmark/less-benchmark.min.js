var path=require("path"),fs=require("fs"),sys=require("util"),less=require("../lib/less"),file=path.join(__dirname,"benchmark.less");process.argv[2]&&(file=path.join(process.cwd(),process.argv[2])),fs.readFile(file,"utf8",function(a,b){var c,d,e,f;console.log("Benchmarking...\n",path.basename(file)+" ("+parseInt(b.length/1024)+" KB)",""),d=new Date,new less.Parser({optimization:2}).parse(b,function(a,g){e=new Date,f=e-d,console.log("Parsing: "+f+" ms ("+Number(1e3/f*b.length/1024)+" KB/s)"),d=new Date,c=g.toCSS(),e=new Date,console.log("Generation: "+(e-d)+" ms ("+parseInt(1e3/(e-d)*b.length/1024)+" KB/s)"),f+=e-d,console.log("Total: "+f+"ms ("+Number(1e3/f*b.length/1024)+" KB/s)"),a&&(less.writeError(a),process.exit(3))})});