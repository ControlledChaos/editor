(function( exports, $ ) {
    var api = sedApp.editor;

    $( function() {

        api.shortcodeCreate.sed_audio = function( id , param ){

            var js_settings_str = ""; 
            var poster = api.fn.getAttachmentImageFullSrc( param.context.setting_poster );
            if(!_.isEmpty(poster) && poster){
                param.context.setting_poster = poster;
            }else{
                param.context.setting_poster = SED_PB_MODULES_URL + 'video/video/poster.png';
            }

            $.each( param.context , function( key , value ){
            	if( key.substr(0,7) == 'setting' ){
                    var key_setting = key.substr(8);

                    if( key_setting == "autoplay" && api.appPreview.mode == "off" ){
                        value = false;
                    }

                    js_settings_str += "data-audio-" + key_setting.replace(/\_/gi , "-") + '=\"' + value + '\" ';
            	}

            });

            param.context.item_settings = js_settings_str;

            param.context.I18n = api.I18n.sed_audio_module;

            return param;
        };

    });

    api.shortcodeUpdate.sed_audio = {
        setting_autoplay : function( id , value ){

        }
    };


}(sedApp, jQuery));