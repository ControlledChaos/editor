(function( exports, $ ) {
    var api = sedApp.editor;

$( document ).ready( function (  ) {

    var _activeBanner = function( $id ){
        $(".products-banner").find('div.product.current').removeClass("in");
        $(".products-banner").find('div.product.current').addClass("out");
        $(".products-banner").find('div.product.current').addClass("hide");
        $(".products-banner").find('div.product.current').removeClass("current");
             //alert( $(".products-banner").find('div.product[data-product-id="'+$id+'"]').length );
        $(".products-banner").find('div.product[data-product-id="'+$id+'"]').removeClass("out");
        $(".products-banner").find('div.product[data-product-id="'+$id+'"]').removeClass("hide");
        $(".products-banner").find('div.product[data-product-id="'+$id+'"]').addClass("in");
        $(".products-banner").find('div.product[data-product-id="'+$id+'"]').addClass("current");
    };

    $('.sed-countdown-sale-carousel').livequery(function(){

        var options = $(this).data();

        if( options['slidesToShow'] < options['slidesToScroll'] )
            options['slidesToScroll'] = options['slidesToShow'];

        if( options['slidesToShow'] >= 3  ){
            var breakpoint_lg  = 3;
        }else{
            var breakpoint_lg  = 2;
        }

        if( options['slidesToShow'] >= 2  ){
            var breakpoint_md  = 2;
        }else{
            var breakpoint_md  = 2;
        }

        var slick_options = $.extend({} , {
            prevArrow : '<span class="slide-nav-bt slide-prev"><i class="fa fa-angle-left"></i></span>',
            nextArrow : '<span class="slide-nav-bt slide-next"><i class="fa fa-angle-right"></i></span>',
            //swipe      : true ,
            //touchMove  : true ,
            rtl: true,
            infinite: true,
            speed: 300,
            //slidesToScroll: 1,
            slidesToShow: 5,
            autoplay : true,
            autoplaySpeed: 3000,
            pauseOnHover : true,
            centerMode: true,
            //variableWidth: true,
            responsive: [
              {
                breakpoint: 1024,
                settings: {
                  slidesToShow: breakpoint_lg,
                  slidesToScroll: breakpoint_lg,
                }
              },
              {
                breakpoint: 600,
                settings: {
                  slidesToShow: breakpoint_md,
                  slidesToScroll: breakpoint_md
                }
              },
              {
                breakpoint: 480,
                settings: {
                  slidesToShow: 1,
                  slidesToScroll: 1
                }
              }
            ]
        } , options );

        if( $(".sed-countdown-sale-carousel li").length < 6 ){
            slick_options.centerMode = false;
        }

        $(".sed-countdown-sale-carousel li").eq(0).addClass("sc-active"); 
                  //console.log( slick_options );
        $(this).slick(slick_options);



        $(this).on('afterChange', function(slick, currentSlide){

            var currentSlideIndex = $(this).slick('slickCurrentSlide');
            //console.log( currentSlide2 );
            var element = $(this).find('[data-slick-index="'+currentSlideIndex+'"]');

            $(".sed-countdown-sale-carousel li").removeClass("sc-active");
            element.addClass("sc-active");

            var $id = element.find("> a.product-name").data("productId");
            _activeBanner( $id );
        });

    });



    $(".sed-countdown-sale-carousel li > a.product-name").click(function(e){
        e.preventDefault();
        var $id = $(this).data("productId"),
            $index = $(this).parent().data("slickIndex");

        $(".sed-countdown-sale-carousel li").removeClass("sc-active");
        $(this).parent().addClass("sc-active");

        $('.sed-countdown-sale-carousel').slick('slickGoTo',$index);

        _activeBanner( $id );
    });

    $(".products-banner").find('div.product').hover(function(){
        $('.sed-countdown-sale-carousel').slick('slickPause');
    }, function() {
        $('.sed-countdown-sale-carousel').slick('slickPlay');
    });

    $(".sed-countdown-sale-carousel li").click(function(e){
        if( $(".sed-countdown-sale-carousel li").length < 6 ){
            $(".sed-countdown-sale-carousel li").removeClass("slick-active").removeClass("slick-center");
            $(this).addClass("slick-active").addClass("slick-center");
        }
    });

    if( $(".sed-countdown-sale-carousel li").length < 6 ){
        $(".sed-countdown-sale-carousel li").removeClass("slick-active").removeClass("slick-center");
        $(".sed-countdown-sale-carousel li").eq(0).addClass("slick-active").addClass("slick-center");
    }

});

}(sedApp, jQuery));