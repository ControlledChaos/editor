/*
* sticky header
* requirement : jquery and underscore
* created By SiteEditor Team
* http://www.siteeditor.org
* @SiteEditor Pakage
*/
(function($) {

    $( document ).ready( function (  ) {

        $('.init-sticky-header').livequery(function(){

            var sticky_header_height = 65 ,
                sticky_top = $('.sticky-header').parent().offset().top + "px" ,
                sticky_start = $('.sticky-header').parent().offset().top,
                init_header = false;

            if( !init_header ){
                $( ".sticky_logo_element" ).clone().appendTo( "#sticky-logo" );

                //if( $ )
                $( ".sticky_nav_element" ).clone().appendTo( "#sticky-nav" );
                init_header = true;
            }

            var anchor_scrolling = 0;
            $('.sticky-header').css('top', sticky_start+'px');

            $(this).waypoint(function(direction) {
                if(direction === "down") {
                    // one page anchor page load scrolling
                    var adminbar_height = $('#wpadminbar').outerHeight();
                    var anchor = window.location.hash.toString();

                    if( anchor.length > 1 && $(anchor).length && ! anchor_scrolling ) {
                        $('html, body').animate({
                            scrollTop: $(anchor).offset().top - adminbar_height - 65 + 1
                        }, 350, 'easeInOutExpo');
                        anchor_scrolling = 1;
                    }

                    if( $('#wpadminbar').length ) {
                        sticky_top = adminbar_height+"px";
                    }

                    $('.sticky-header').show();

                    $('.sticky-header').animate({
                        height: sticky_header_height + 3 + 'px',
                        top: sticky_top
                    }, 500 );

                    $('.sticky-header-inner').animate({
                        height: sticky_header_height  + 'px',
                        top: sticky_top
                    }, 500 );

                    $('.sticky-header').addClass('sticky');

                } else if(direction === "up") {

                    $('.sticky-header').removeClass( 'sticky' );
                    $('.sticky-header').hide();

                }
            });
        });
    });

})(jQuery);