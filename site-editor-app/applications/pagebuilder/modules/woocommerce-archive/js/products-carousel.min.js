jQuery( document ).ready( function ( $ ) {
    $('.sed-products-carousel').livequery(function(){

        var options = $(this).data();

        if( options['slidesToShow'] < options['slidesToScroll'] )
            options['slidesToScroll'] = options['slidesToShow'];

        if( options['slidesToShow'] >= 3  ){
            var breakpoint_lg  = 3;
        }else{
            var breakpoint_lg  = options['slidesToShow'];
        }

        if( options['slidesToShow'] >= 2  ){
            var breakpoint_md  = 2;
        }else{
            var breakpoint_md  = options['slidesToShow'];
        }

        if( $("body").hasClass("rtl-body") ){
            options['rtl'] = true;
        }

        var slick_options = $.extend({} , {
            slidesToShow: 3,
            slidesToScroll: 1,
            prevArrow : '<span class="slide-nav-bt slide-prev"><i class="fa fa-angle-left"></i></span>',
            nextArrow : '<span class="slide-nav-bt slide-next"><i class="fa fa-angle-right"></i></span>',
            swipe      : true ,
            touchMove  : true ,
            //centerMode: true,
            //centerPadding: '60px',
            responsive: [
              {
                breakpoint: 1024,
                settings: {
                  slidesToShow: breakpoint_lg,
                  slidesToScroll: breakpoint_lg,
                }
              },
              {
                breakpoint: 600,
                settings: {
                  slidesToShow: breakpoint_md,
                  slidesToScroll: breakpoint_md
                }
              },
              {
                breakpoint: 480,
                settings: {
                  slidesToShow:2,
                  slidesToScroll: 1 ,
                  arrows: false,
                }
              }
            ]
        } , options );

        var $element = $(this).parents(".module.modules-woocommerce:first"),
            $this = $(this);
                                            //sed.moduleResizeStop
        $element.on("sed.moduleSortableStop sed.moduleResize sedAfterRemoveColumns" , function(){
            $this.slick('unslick');
            $this.slick( slick_options );
        });


        $element.find("img").on( "sed.changeImgSrc", function( event , newSrc ){
            $this.slick('unslick');
            $this.slick( slick_options );
        });

        $element.parents(".sed-pb-module-container:first").on( "sedChangeModulesLength", function( e , length ){
            $this.slick('unslick');
            $this.slick( slick_options );
        });

        $element.parents(".sed-pb-module-container:first").on( "sedChangedSheetWidth", function(){
            if( $(this).parents(".sed-row-boxed").length > 0 ){
                $this.slick('unslick');
                $this.slick( slick_options );
            }
        });

        $element.parents(".sed-pb-module-container:first").on( "sedChangedPageLength", function( e , length ){
            if( ($(this).parents(".sed-row-boxed").length == 0 && length == "wide" ) || ($(this).parents(".sed-row-boxed").length == 1 && length == "boxed" ) ){
                $this.slick('unslick');
                $this.slick( slick_options );
            }
        });

        $element.parents(".sed-pb-module-container:first").on( "sedFirstTimeActivatedTabs", function(){
            $this.slick('unslick');
            $this.slick( slick_options );
        });

        $element.parents(".sed-pb-module-container:first").on( "sedFirstTimeActivatedAccordionTabs", function(){
            $this.slick('unslick');
            $this.slick( slick_options );
        });

        $element.parents(".sed-pb-module-container:first").on( "sedFirstTimeMegamenuActivated", function(){
            $this.slick('unslick');
            $this.slick( slick_options );
        });

        $(this).slick(slick_options);

    });

});