(function( exports, $ ) {
    var api = sedApp.editor;

    $( function() {

        api.shortcodeCreate.sed_accordion_slider = function( id , param ){

            if($('[sed_model_id="' + id + '"]').length > 0){

                var liLen = $('[sed_model_id="' + id + '"]').find(".slider").children("li").length;

                if (( liLen * param.context.setting_slide_width) < 100) { /* Prevents gaps in the accordion. For example, a slider with 4 slides at 150 pixels wide. 4 * 150 = 600. Needs to fill an 800px space. */
                    param.context.setting_slide_width = parseInt(100/liLen) + 2; /* Use 100% instead of the defined width */        ///console.log(param.context.setting_slide_width);
                } else if(  param.context.setting_slide_width > 79) {
                    param.context.setting_slide_width = 79;
                }

            }

            if(param.context.setting_starting_slide < 0){
                param.context.setting_starting_slide = 0;
            } else if( param.context.setting_starting_slide > (liLen - 1) ){
                param.context.setting_starting_slide = (liLen - 1);
            }

            if(param.context.setting_speed > param.context.setting_timeout){
                param.context.setting_speed = param.context.setting_timeout;
            }

            var js_settings_str = "",key_setting='';
            $.each( param.context , function( key , value ){
            	if( key.substr(0,7) == 'setting' ){
                    key_setting = key.substr(8);

                    if( key_setting == "width"){
                        if( value > 100 )
                            value = 100;
                        else if( value < 51 )
                            value = 51;
                    }


                    js_settings_str += "data-" + key_setting.replace(/\_/gi , "-") + '=\"' + value + '\" ';
            	}

            });

            param.context.item_settings = js_settings_str;
            return param;
        };


    });


}(sedApp, jQuery));