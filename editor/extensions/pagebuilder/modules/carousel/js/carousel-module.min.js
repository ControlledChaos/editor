(function( exports, $ ) {
    var api = sedApp.editor;

    $( function() {

        api.shortcodeCreate.sed_carousel = function( id , param ){

            var js_settings_str = "";

            if( $("body").hasClass("rtl-body") ){
                param.context.setting_rtl = true;
            }

            $.each( param.context , function( key , value ){
            	if( key.substr(0,7) == 'setting' ){
                    var key_setting = key.substr(8);

                    js_settings_str += "data-carousel-" + key_setting.replace(/\_/gi , "-") + '=\"' + value + '\" ';
            	}

            });

            param.context.item_settings = js_settings_str;

            return param;
        };

        api.Events.bind( "changePreviewMode" , function( mode ){

            var sedModulesCarousel = $('.sed_module_carousel').parent();

            if( sedModulesCarousel.length > 0 ){

                sedModulesCarousel.each( function( ){

                    api.contentBuilder.refreshModule( $(this).attr("sed_model_id") );

                });

            }

        });

    });


}(sedApp, jQuery));