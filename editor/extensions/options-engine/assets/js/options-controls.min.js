/**
 * SiteEditor Posts JS Plugin
 *
 * Copyright, 2016
 * Released under LGPL License.
 *
 * License: http://www.siteeditor.org/license
 * Contributing: http://www.siteeditor.org/contributing
 */

/*global siteEditor:true */
(function( exports, $ ){

    var api = sedApp.editor;


    api.SliderControl = api.SiteEditorControls.extend({

        _ready: function() {

			var control = this ,
				slider = this.container.find('.sed-bp-form-slider-container');

			this.sliderAmount = this.container.find("#slider-amount");

            this.sliderOptions =  {};
            this.slider = slider;

            if ( typeof control.params.min !== undefined ) {
                this.sliderOptions.min = control.params.min;
            }

            if ( typeof control.params.max !== undefined ) {
                this.sliderOptions.max = control.params.max;
            }

            /*if ( control.params.step ) {
                this.sliderOptions.step = control.params.step;
            }*/

            if ( control.params.default_value ) {
                this.sliderOptions.value = control.params.default_value;
            }else{
            	this.sliderOptions.value = 10;	
            }

            this.sliderOptions.range = "min";   

            this.sliderOptions.slide = function( event, ui ) {
		        control.sliderAmount.val( ui.value );
		        control.refresh( ui.value ); 
		    };

           /* if ( control.params.page ) {
                this.sliderOptions.page = control.params.page;
            }

            if ( control.params.lock &&  control.params.lock.id &&  control.params.lock.slider ) {
                 this.lock = $("#" + control.params.lock.id);
                 this.sliderConnect = $(control.params.lock.slider);
                 this.controlsConnect = control.params.lock.controls || [];
            }*/

			slider.slider( this.sliderOptions ); 

			//this.sliderAmount.val( this.setting.get() );
            
            //slider.slider(this.sliderOptions); 
                        //spin   spinchange
            /*slider.on("spinstop keyup", function(e,ui){
                var spVal = $(this).val();

                if( !_.isUndefined( control.lock ) && control.lock.prop('checked') && !_.isUndefined( control.sliderConnect ) ){
                    control.sliderConnect.val( spVal );

                    _.each(control.controlsConnect , function( controlId ){
                        var spControl = api.control.instance( controlId );

                        spControl.refresh( spVal );

                    });
                }

                control.refresh( spVal );
            });*/

        },

        _update: function( val ){ 

            this.sliderAmount.val( val );

        }

    });

    api.SortableControl = api.SiteEditorControls.extend({

        _ready: function() {

			var control = this ,
				sortable = this.container.find('.sed-bp-form-sortable');

            this.sliderOptions =  {}; 
            this.sortable = sortable;


		    alert("test");

			sortable.sortable({
		      items: "li.sed-bp-form-sortable-item"
		    }); 
			sortable.disableSelection(); 

        },

        _update: function( val ){ 

           // this.sliderAmount.val( val );

        }

    });


    api.controlConstructor = $.extend( api.controlConstructor, {
        slider             : api.SliderControl,
        sortable           : api.SortableControl
    });



    $( function() {


    });

})( sedApp, jQuery );