/**
 * plugin.js
 *
 *
 * License: http://www.siteeditor.org/license
 * Contributing: http://www.siteeditor.org/contributing
 */

/*global siteEditor:true */
siteEditor.PluginManager.add('media', function(siteEditor) {
    var api = siteEditor.sedAppClass.editor , $ = siteEditor.dom.Sizzle;

    //console.log( sedApp.editor === api );
    //console.log( siteEditor.dom.Sizzle === jQuery );
    var mediaLibraryInit = false , sedMediaLibrary;
    //var $container = $("#sed-dialog-media-library");
    //$container.innerHeight();
    $( function() {
        api.settings = window._sedAppEditorSettings;
        api.l10n = window._sedAppEditorControlsL10n;
        api.mediaSettings = window._sedAppEditorMediaSettings;

        // Check if we can run the customizer.
        if ( ! api.settings )
            return;


        // Redirect to the fallback preview if any incompatibilities are found.
        if ( ! $.support.postMessage || (  api.settings.isCrossDomain ) )  //! $.support.cors &&
            return window.location = api.settings.url.fallback;



   });
});